<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>rono23</title>
  <id>https://rono23.com/posts</id>
  <link href="https://rono23.com/posts"/>
  <link href="https://rono23.com/posts/feed.xml" rel="self"/>
  <updated>2019-08-22T00:00:00+09:00</updated>
  <author>
    <name>rono23</name>
  </author>
  <entry>
    <title>fastlaneのadd_badgeで数字が潰れる</title>
    <link rel="alternate" href="https://rono23.com/posts/shrunk-badge/"/>
    <id>https://rono23.com/posts/shrunk-badge/</id>
    <published>2019-08-22T00:00:00+09:00</published>
    <updated>2020-02-11T23:08:43+09:00</updated>
    <author>
      <name>rono23</name>
    </author>
    <content type="html">&lt;p&gt;アプリのアイコンにビルド番号などを追加してたけど、その数字が&lt;a href="https://github.com/HazAT/badge/issues/91"&gt;潰れる問題&lt;/a&gt;が発生…！&lt;br&gt;
&lt;code&gt;pango 1.42.4&lt;/code&gt; だとOKとコメントがあったので、取り急ぎ古いバージョンをインストールして対処できた。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;cd /usr/local/Homebrew/Library/Taps/homebrew/homebrew-core/Formula

## You need to fetch when commit log was grafted
# git log pango.rb
# git fetch --depth 10000

git checkout a8ac7ea5fe9339558c9fbe49acaa1a2452bcd4d0 pango.rb
brew reinstall pango
brew pin pango
git reset --hard
brew list --versions | grep pango #=&amp;gt; pango 1.42.4_2
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;pin&lt;/code&gt; したので、対応されたら &lt;code&gt;unpin&lt;/code&gt; して更新すればOK。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;brew unpin pango
&lt;/code&gt;&lt;/pre&gt;
</content>
  </entry>
  <entry>
    <title>TestFlightのテスト内容の必須文字数が変更</title>
    <link rel="alternate" href="https://rono23.com/posts/testflight-whats-new-error/"/>
    <id>https://rono23.com/posts/testflight-whats-new-error/</id>
    <published>2019-07-22T00:00:00+09:00</published>
    <updated>2020-02-11T23:08:43+09:00</updated>
    <author>
      <name>rono23</name>
    </author>
    <content type="html">&lt;blockquote&gt;
&lt;p&gt;Spaceship::UnexpectedResponse: [!] An attribute value has text that is too short. - Text for whatsNew is too short.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Bitrise上で少し前からエラーが発生するようになって調べてみたら、TestFlightのテスト内容の必須文字数が変更になったっぽい 🤔&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;テスト内容は4文字以上でなければなりません。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;code&gt;App Store Connect&lt;/code&gt; &amp;gt; &lt;code&gt;TestFlight&lt;/code&gt; &amp;gt; アプリ選択 &amp;gt; &lt;code&gt;テストの詳細&lt;/code&gt; で &lt;code&gt;テスト内容&lt;/code&gt; を9文字以下で保存するとエラー（5文字以上でも同じエラーメッセージ…）。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# Fastlane
- pilot(changelog: &amp;quot;9文字以下&amp;quot;, ...)
+ pilot(changelog: &amp;quot;10文字以上のテキスト&amp;quot;, ...)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;10文字以上に変更したら 🙆🎉&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;最近、月1でBitrise or Fastlaneで躓いてる気がする… 😭&lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>2019年上半期に読んで面白かった本</title>
    <link rel="alternate" href="https://rono23.com/posts/books-i-read-in-the-first-half-of-2019/"/>
    <id>https://rono23.com/posts/books-i-read-in-the-first-half-of-2019/</id>
    <published>2019-06-29T00:00:00+09:00</published>
    <updated>2020-02-11T23:08:43+09:00</updated>
    <author>
      <name>rono23</name>
    </author>
    <content type="html">&lt;h4&gt;小説&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;ストーナー（ジョン・ウィリアムズ、東江一紀訳）

&lt;ul&gt;
&lt;li&gt;助教授として生きた男性の一生を過不足なく描き、素晴らしかった。たぶん今年1番の小説かも&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;マーティン・イーデン（ジャック・ロンドン、辻井栄滋訳）

&lt;ul&gt;
&lt;li&gt;船乗りから小説家へ。労働者階級、ブルジョワ、哲学などなかなか激しかった。少し冗長的なところもあるけど、こちらも素晴らしかった&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;ジェイン・エア（シャーロット・ブロンテ、河島弘美訳）

&lt;ul&gt;
&lt;li&gt;女性の激動の一生。当時の貴族や宗教観を小説越しに見るの好きだなー&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;他にもジョン・アップダイクやジョン・チーヴァーなど、今年初めて読んだ作家さんが多かった。&lt;br&gt;
ジョン・チーヴァーよりもレイモンド・カーヴァーのほうが好きなことがわかったけど、たぶん陰鬱の表現の差かなと思った。&lt;/p&gt;

&lt;h4&gt;技術書&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;OAuth徹底入門

&lt;ul&gt;
&lt;li&gt;曖昧だったので色々と勉強になった&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Web API The Good Parts

&lt;ul&gt;
&lt;li&gt;目新しいことはなかったけど、わかりやすくまとまっていてよかった&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Swift実践入門

&lt;ul&gt;
&lt;li&gt;今年に入ってから少しずつ書いてるけどなかなか慣れない&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;iOS周りは勉強時間やコードを書いた時間が少なかったので、下半期はもっとコード書こ。&lt;/p&gt;

&lt;h4&gt;その他&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;NO HARD WORK!

&lt;ul&gt;
&lt;li&gt;相変わらずのBasecamp節！&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;「エンタメ」の夜明け

&lt;ul&gt;
&lt;li&gt;ディズニーを誘致した話で、当時のビジネスが垣間見れて楽しかった。この本自体もエンタメやね&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr&gt;

&lt;p&gt;上半期は約30冊（漫画除く）しか読めなかったけど、あまりハズレが無かった印象。&lt;br&gt;
定期的にブログを書いていこうと思ったけど、書くのに慣れていないので難しい…&lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>Capybara WebkitからHeadless Chromeに移行</title>
    <link rel="alternate" href="https://rono23.com/posts/replace-capybara-webkit-with-headless-chrome/"/>
    <id>https://rono23.com/posts/replace-capybara-webkit-with-headless-chrome/</id>
    <published>2017-09-11T00:00:00+09:00</published>
    <updated>2020-02-11T23:08:43+09:00</updated>
    <author>
      <name>rono23</name>
    </author>
    <content type="html">&lt;p&gt;インストール&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# Gemfile
group :test do
  gem &amp;#39;selenium-webdriver&amp;#39;
  gem &amp;#39;chromedriver-helper&amp;#39;
  ...
end
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;chromedriver&lt;/code&gt; は &lt;code&gt;brew install chromedriver&lt;/code&gt; するか、上記のようにgemでインストールすると楽だけど、gemの場合、&lt;a href="https://github.com/flavorjones/chromedriver-helper#updating-to-latest-chromedriver"&gt;アップデート&lt;/a&gt;について少し念頭に入れておいたほうがいいかも。&lt;br&gt;
CircleCIだとimageに &lt;code&gt;circleci/ruby:2.4.1-node-browsers&lt;/code&gt; を指定していれば &lt;code&gt;chromedriver&lt;/code&gt; とか色々と入れてくれて、特に設定等しなくても動く。&lt;/p&gt;

&lt;p&gt;設定&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# spec/rails_helper.rb
require &amp;#39;selenium/webdriver&amp;#39;

...

Capybara.register_driver :headless_chrome do |app|
  capabilities = Selenium::WebDriver::Remote::Capabilities.chrome(
    chromeOptions: { args: %w(headless disable-gpu window-size=1280,800) }
  )

  Capybara::Selenium::Driver.new app, browser: :chrome, desired_capabilities: capabilities
end
Capybara.javascript_driver = :headless_chrome
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;修正が必要だったのは &lt;code&gt;trigger&lt;/code&gt;, &lt;code&gt;alert&lt;/code&gt;, &lt;code&gt;drag_to&lt;/code&gt; 周りで、最新のバージョンだと &lt;code&gt;save_and_open_screenshot&lt;/code&gt; も正常に動作しました。&lt;/p&gt;

&lt;p&gt;Versions&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;/Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome --version
Google Chrome 61.0.3163.79

chromedriver -v
ChromeDriver 2.32.498537
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;trigger&lt;/code&gt; の削除&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# before
find(&amp;#39;i.icon-cancel&amp;#39;).trigger(&amp;#39;click&amp;#39;)

# after
find(&amp;#39;i.icon-cancel&amp;#39;).click
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;alert&lt;/code&gt; の修正&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# before
click_button I18n.t(:subscribe)

# after
accept_confirm { click_button I18n.t(:subscribe) }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;drag_to&lt;/code&gt; の修正&lt;/p&gt;

&lt;p&gt;以下のような条件があると &lt;code&gt;drag_to&lt;/code&gt; が動かなくなったので、CSSで &lt;code&gt;width&lt;/code&gt; を大きめに設定したら動いた。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;span class=&amp;#39;draggable&amp;#39;&amp;gt;&amp;lt;i class=&amp;#39;fa fa-arrows-v&amp;#39;&amp;gt;&amp;lt;/i&amp;gt;&amp;lt;/span&amp;gt;&lt;/code&gt; ようなアイコンだけ&lt;/li&gt;
&lt;li&gt;CSSで &lt;code&gt;.draggable { position: absolute; right: -100px; }&lt;/code&gt; みたいなこと&lt;/li&gt;
&lt;li&gt;window サイズが未設定（上記設定で &lt;code&gt;window-size=1280,800&lt;/code&gt; したのはこのため）&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;参考&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href="https://developers.google.com/web/updates/2017/04/headless-chrome?hl=ja"&gt;ヘッドレス Chrome ことはじめ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://robots.thoughtbot.com/headless-feature-specs-with-chrome"&gt;Headless Capybara Feature Specs with Chrome&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://sites.google.com/a/chromium.org/chromedriver/getting-started"&gt;ChromeDriver - WebDriver for Chrome&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/flavorjones/chromedriver-helper"&gt;flavorjones/chromedriver-helper&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
  </entry>
  <entry>
    <title>Webpackerで入れたVueにESLintを使う</title>
    <link rel="alternate" href="https://rono23.com/posts/vue-with-eslint-on-webpacker/"/>
    <id>https://rono23.com/posts/vue-with-eslint-on-webpacker/</id>
    <published>2017-09-08T00:00:00+09:00</published>
    <updated>2020-02-11T23:08:43+09:00</updated>
    <author>
      <name>rono23</name>
    </author>
    <content type="html">&lt;p&gt;インストール&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;yarn add --dev eslint eslint-loader eslint-plugin-import eslint-config-airbnb-base eslint-plugin-vue@beta
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;設定&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;// .eslintrc
{
  env: {
    browser: true
  },
  &amp;#39;extends&amp;#39;: [
    &amp;#39;airbnb-base&amp;#39;,
    &amp;#39;plugin:vue/recommended&amp;#39;
  ]
}
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;// config/webpack/development.js
const environment = require(&amp;#39;./environment&amp;#39;)

environment.loaders.set(&amp;#39;eslint&amp;#39;, {
  test: /\.(js|vue)$/,
  loader: &amp;#39;eslint-loader&amp;#39;,
  enforce: &amp;#39;pre&amp;#39;,
  options: {
    failOnWarning: true
  }
})

module.exports = environment.toWebpackConfig()
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;options&lt;/code&gt; の設定は&lt;a href="https://github.com/MoOx/eslint-loader#options"&gt;公式&lt;/a&gt;を参考に、例えば &lt;code&gt;failOnWarning: true&lt;/code&gt; だとbuildに失敗してコンソールやログにエラーが表示されて、 &lt;code&gt;failOnWarning: false&lt;/code&gt; にするとbuildはとおってログにだけメッセージが残る。&lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>Google Domainsに移管してみた</title>
    <link rel="alternate" href="https://rono23.com/posts/transfer-domain-to-google-domains/"/>
    <id>https://rono23.com/posts/transfer-domain-to-google-domains/</id>
    <published>2017-09-07T00:00:00+09:00</published>
    <updated>2020-02-11T23:08:43+09:00</updated>
    <author>
      <name>rono23</name>
    </author>
    <content type="html">&lt;p&gt;ムームードメインから&lt;a href="https://domains.google.com/"&gt;Google Domains&lt;/a&gt;にドメインを移管してみたけど、申請から完了まで90分位でできた。&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;ムームードメインで、WHOIS情報を自身のに変更&lt;/li&gt;
&lt;li&gt;ムームードメインで、「ドメイン操作」 &amp;gt; 「ドメイン一覧」 &amp;gt; ドメインをクリックして、認証コードをメモ&lt;/li&gt;
&lt;li&gt;Google Domainsの&lt;a href="https://domains.google.com/registrar#t=t"&gt;ドメインの移管&lt;/a&gt;から、ドメインを入力して申請&lt;/li&gt;
&lt;li&gt;Googleから移管確認のメールが来るのでOKする&lt;/li&gt;
&lt;li&gt;ムームードメインから移管申請確認メールが来るのでOKする&lt;/li&gt;
&lt;li&gt;Google Domains のネームサーバーを使用するようにして、レコード周りを追加&lt;/li&gt;
&lt;/ol&gt;

&lt;h4&gt;メールの送受信について&lt;/h4&gt;

&lt;p&gt;Google Domains のネームサーバーを利用していると、&lt;a href="https://support.google.com/domains/answer/3251241?hl=ja"&gt;メール エイリアスを作成して転送&lt;/a&gt;できるので便利。&lt;br&gt;
例えば &lt;code&gt;hello@rono23.com&lt;/code&gt; を &lt;code&gt;rono23@gmail.com&lt;/code&gt; に転送できるので、メールの受信は簡単。&lt;/p&gt;

&lt;p&gt;一方で、メールの送信は、&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;送信したいGmailアカウントで、&lt;a href="https://support.google.com/accounts/answer/185839?hl=ja"&gt;2段階認証を有効&lt;/a&gt;にする&lt;/li&gt;
&lt;li&gt;&lt;a href="https://myaccount.google.com/apppasswords"&gt;アプリ パスワード&lt;/a&gt; &amp;gt; 「アプリを選択」 &amp;gt; 「その他（名前を入力）」 &amp;gt; 好きな名前を入力（例: rono23.com） &amp;gt; パスワードをメモ&lt;/li&gt;
&lt;li&gt;Gmail &amp;gt; 「設定」 &amp;gt; 「アカウントとインポート」 &amp;gt; 「他のメール アドレスを追加」 &amp;gt; 名前、メールアドレスを入力 &amp;gt; 下記入力&lt;/li&gt;
&lt;/ol&gt;

&lt;table&gt;&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;SMTP サーバー&lt;/th&gt;
&lt;th&gt;ポート&lt;/th&gt;
&lt;th&gt;ユーザー名&lt;/th&gt;
&lt;th&gt;パスワード&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;smtp.gmail.com&lt;/td&gt;
&lt;td&gt;465&lt;/td&gt;
&lt;td&gt;ログインしているGmailアカウント（メールアドレス）&lt;/td&gt;
&lt;td&gt;2. のパスワード&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;

&lt;p&gt;※ &lt;a href="https://support.google.com/domains/answer/3251241?hl=ja"&gt;メール転送&lt;/a&gt;の「転送されたメールアドレスからメールを送信するには」参照&lt;/p&gt;

&lt;h4&gt;感想・備忘録&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;.jp&lt;/code&gt; ドメインの購入や移管はまだ非対応&lt;/li&gt;
&lt;li&gt;平日の午前中に移管したので、休日や深夜だともっと時間かかるかも&lt;/li&gt;
&lt;li&gt;ムームードメインのアカウントが不要になったので、管理するアカウントが1つ減って嬉しい&lt;/li&gt;
&lt;li&gt;ドメイン代はちょっと高い。例えば &lt;code&gt;.com&lt;/code&gt; は、ムームードメインやお名前.comは1,040円、Google Domainsは1,400円&lt;/li&gt;
&lt;li&gt;Google Domainsを日本語で使っていたら、コンソールにローカライズエラーがでて動かなくなったけど、英語に切り替えたら直った&lt;/li&gt;
&lt;/ul&gt;
</content>
  </entry>
</feed>
