<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8" /><meta content="width=device-width, initial-scale=1.0" name="viewport" /><title>React Native 実践本のメモ - rono23</title><link rel="alternate" type="application/atom+xml" title="rono23 - Atom Feed" href="/posts/feed.xml" /><link href="/stylesheets/all-74d75e74.css" rel="stylesheet" /><script src="/javascripts/all-da39a3ee.js"></script><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-845284-7', 'auto');
  ga('send', 'pageview');
</script>
</head><body><div class="header clear"><div class="l-constrained"><h1><a href="/">rono23</a></h1><ul><li><a href="/about">About</a></li></ul></div></div><div class="hero" style="background-image: url('/images/hero/default-71bf53ff.jpg')"></div><div class="main"><div class="l-constrained"><div class="post-date">May 23, 2020</div><div class="post-title">React Native 実践本のメモ</div><div class="markdown"><p><a href="https://www.amazon.co.jp/dp/B088BLSH9V/">React Native 〜 JavaScriptによるiOS／Androidアプリ開発の実践</a>（<a href="https://github.com/react-native-jp/praiser">GitHub</a>）を読んで、0.62だと動かなかったので、取り急ぎその対応メモ。</p>

<blockquote>
<p>Argument of type &#39;string | ReactTestInstance&#39; is not assignable to parameter of type &#39;Pick<ReactTestInstanceExtended, \"type\" | \"props\" | \"parent\" | \"children\" | \"find\" | \"findAll\" | \"getProp\" | \"parentNode\">&#39;. Type &#39;string&#39; is not assignable to type &#39;Pick<ReactTestInstanceExtended, \"type\" | \"props\" | \"parent\" | \"children\" | \"find\" | \"findAll\" | \"getProp\" | \"parentNode\">&#39;.</p>
</blockquote>

<pre><code>- fireEvent.press(container.children[0]);
+ fireEvent.press(container.children[0] as any);
</code></pre>

<blockquote>
<p>Error: expect(jest.fn()).toBeCalled() Expected number of calls: &gt;= 1 Received number of calls: 0</p>
</blockquote>

<pre><code># https://github.com/facebook/react-native/issues/27721
# package.json
jest: {
  &quot;setupFilesAfterEnv&quot;: [&quot;./jest.setup.js&quot;],
}

# jest.setup.js
jest.mock(&#39;react-native/Libraries/Components/Touchable/TouchableOpacity&#39;, () =&gt; &#39;TouchableOpacity&#39;);
</code></pre>

<blockquote>
<p>No overload matches this call. Overload 1 of 2, &#39;(props: Pick<Pick<ViewProps & RefAttributes<View> &amp; { children: ReactNode; style?: StyleProp<ViewStyle>; theme: Theme; }, \&quot;style\&quot; | ... 52 more ... | \&quot;onTouchEndCapture\&quot;&gt; &amp; { ...; } &amp; { ...; } &amp; { ...; }, \&quot;onPress\&quot; | ... 63 more ... | \&quot;contentStyle\&quot;&gt; &amp; { ...; }, context?: any): ReactElement&lt;...&gt; | ... 1 more ... | null&#39;, gave the following error. Property &#39;accessibilityStates&#39; is missing in type &#39;{ children: \&quot;\&quot; | Element | undefined; accessibilityLabel: string; icon: string; mode: \&quot;contained\&quot;; onPress: () =&gt; void; }&#39; but required in type &#39;Pick<Pick<ViewProps & RefAttributes<View> &amp; { children: ReactNode; style?: StyleProp<ViewStyle>; theme: Theme; }, \&quot;style\&quot; | ...</p>
</blockquote>

<pre><code># https://www.npmjs.com/package/patch-package
# https://github.com/callstack/react-native-paper/issues/1920
yarn add patch-package postinstall-postinstall
vim node_modules/@types/react-native/index.d.ts

# `accessibilityState?: AccessibilityState;` の下に追加
accessibilityStates?: any; 

yarn patch-package @types/react-native
</code></pre>

<hr>

<p>React、React Native、TypeScript初心者なので、色々とはまる 🤣</p>
</div><div class="post-comment"><p><a href="https://github.com/rono23/rono23.github.io/issues/new?title=[react-native-book-fixes]%20">Post a comment on GitHub</a></p></div><div class="post-tags"><ul class="inline"><li>Tags:</li><li><a href="/posts/tags/react-native/">react-native</a></li></ul></div></div></div><div class="footer"><div class="l-constrained"><div class="copy">&copy; 2021 rono23</div></div></div></body></html>